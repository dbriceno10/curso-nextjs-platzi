 Under The Hood: Optimizaciones ocultas en las paginas y Pre rendering de p谩ginas
<h4>Ideas/conceptos claves</h4>
chunk.- pedazo de c贸digo

CSR.- Client Side Rendering

SSR.- Server Side Rendering

<h4>Apuntes</h4>
"scripts": {
    "dev": "next", // desarrollo
    "build": "next build", // build prod
    "start": "next start" // server prod
},
Al momento de compilar separa el c贸digo con la t茅cnica code splitting. Ademas de aplicar hashes a los assets. Ademas que para cada pagina generara un chunk especifico y mantendr谩 el c贸digo que se usara durante toda la aplicaci贸n

Podemos ver que las paginas generadas son SSR d谩ndonos m谩s SEO que con CSR

RESUMEN: Next.js aplica al bundle final diferentes optimizaciones como ser vendor files que hacen que no nos preocupemos de la configuraci贸n del proyecto. Ademas que nos da un mejor SEO por el server side rendering


Optimizacion de Archivos
/
Next.js tiene como objetivo ayudarnos a crear aplicaciones React evitando que nos preocupemos por cosas que no debemos hacer. Y tambi茅n optimizando el c贸digo que creamos cuando se compila. As铆, una de las maneras en que Next.js hace posible la optimizaci贸n del c贸digo es utilizando Code Splitting en lugar de hacer JS Bundles. Vamos a explicar cada uno de ellos a fondo:
/

JS Bundles: Es la forma m谩s com煤n de optimizar el c贸digo. Consiste en juntar todo el c贸digo que hicimos en un solo archivo JS. De tal manera que se reduce y optimiza para que el archivo principal tenga menos bytes que todos los archivos juntos sin compresi贸n y optimizaci贸n. De este modo, el servidor s贸lo enviar谩 un 煤nico archivo, y el navegador renderizar谩 la p谩gina m谩s r谩pidamente. JS Bundler es utilizado por herramientas como webpack, Gulp, entre otras. Pero el inconveniente de hacer bundles. Es que si la aplicaci贸n que estamos creando es muy compleja o tiene demasiados archivos, hacer JS Bundles ser谩 ineficiente a medida que pase el tiempo, debido a que muchas veces el navegador recibir谩 c贸digo que ni siquiera necesita.
/
Divisi贸n del c贸digo: Es un nuevo m茅todo utilizado por herramientas de desarrollo como Next.js para solucionar los problemas que tiene hacer JS Bundles. Este nuevo m茅todo se basa en la premisa de que en lugar de fusionar todo el c贸digo en un solo archivo. Debemos identificar las partes o secciones de c贸digo que se repiten en un determinado archivo. Extraerlas despu茅s del archivo original. A continuaci贸n, ponerlo en otro archivo, y por 煤ltimo comprimirlo y optimizarlo para que tenga menos archivos que el original. Este proceso debe repetirse para cada archivo dentro de la carpeta de p谩ginas que tengamos. De esta manera, tendremos muchos archivos. Pero la ventaja de hacerlo. Es que s贸lo enviaremos al navegador las partes de c贸digo que necesita para renderizar una p谩gina concreta. A saber, cada uno de los archivos que tendr谩 el navegador, se llaman chunks.
/
Los chunks se caracterizan por su estructura y por la forma de nombrar cada uno de ellos.
/
Por ejemplo. Normalmente, los chunks se nombran de esta manera:
/
Screen Shot 2021-09-28 at 11.50.15 AM.png
/
Y contienen el siguiente c贸digo:
/
Screen Shot 2021-09-28 at 11.46.40 AM.png
/
La forma en que podemos observar la forma en que Next.js realiza la divisi贸n del c贸digo utilizando nuestro c贸digo es:
/

En primer lugar, ejecutar el comando npm run build (o yarn dev si usas yarn).
/
/Screen Shot 2021-09-28 at 11.52.05 AM.png
/
Ver谩s que te muestra un output extensa, y en esa misma salida, est谩n todos los chunks que Next.js hizo.
/
Screen Shot 2021-09-28 at 11.53.43 AM.png
/
Debajo de los chunks mostrados, hay una leyenda que nos dice que en cuanto el navegador reciba los chunks que Next.js hizo Ser谩n renderiz谩ados como archivos HTML. Y eso es muy importante, ya que eso significa que nuestro sitio web se renderizar谩 r谩pidamente. Y que por el hecho de que el navegador reciba los archivos HTML directamente, nuestra calidad SEO aumentar谩.
/
Screen Shot 2021-09-28 at 11.54.34 AM.png
/
Abre tu navegador. Siguiendo as铆. Habilitar la opci贸n de inspecci贸n. A continuaci贸n, seleccione la opci贸n de red. Volver a cargar la p谩gina despu茅s. Y si analizamos los archivos mostrados, nos daremos cuenta de que son los mismos archivos (probablemente van a aparecer m谩s archivos) que fueron mostrados en la terminal por Next.js anteriormente.
/
Screen Shot 2021-09-28 at 11.55.19 AM.png
/
El hecho de que Next.js haga la divisi贸n del c贸digo, tiene todo el sentido. Debido a que Next.js es para el renderizado del lado del servidor (SSR) y la divisi贸n del c贸digo es bastante 煤til para el tiempo de carga y el buen SEO.